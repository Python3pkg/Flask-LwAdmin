{% import 'macros/messages.html' as messages_macros with context -%}
{% import 'macros/filters.html' as filters_macros %}
{% import 'macros/list_actions.html' as list_actions_macros %}
{% import 'macros/batch_actions.html' as batch_actions_macros %}
{% import 'macros/pager.html' as pager_macros %}

{% macro list(title, configuration, pager) -%}
    <h1>{{ title }}</h1>

    {{ messages_macros.messages() }}

    {% if pager.is_filter() or pager.is_list_actions() %}
    <div class="btn-toolbar">
        <div class="btn-group">
            {% if pager.is_filter() %}{{ filters_macros.filter_button('filtersBootstrapGeneratorModal') }}{%  endif %}
        </div>
        {% if pager.is_list_actions() %}{{ list_actions_macros.list_actions(pager=pager) }}{% endif %}
    </div>
    {%  endif %}

    {% if pager.is_filter() %}
        {% set filter_element = pager.get_filter() %}
        {{ filter_element['url'] }}
        {{ filters_macros.filter_modal(id='filtersBootstrapGeneratorModal', url=filter_element['url'], form=filter_element['form']) }}
    {% endif %}

    <form class="form-inline" action="{{ url_for('user.user_batch') }}" method="post">
        {{ pager_macros.get_list(configuration=configuration, pager=pager) }}
        {% if pager.is_batch() or pager.is_list_actions() %}
        <div class="btn-toolbar">
            <div class="btn-group">
                {% if pager.is_batch() %}{{ batch_actions_macros.batch_buttons(batch_form=batch_actions) }}{% endif %}
            </div>
            {% if pager.is_list_actions() %}{{ list_actions_macros.list_actions(pager=pager) }}{% endif %}
       </div>
        {%  endif %}
    </form>
{%- endmacro %}